位置控制：
通过拨码开关 SW1 打 OFF 再上电即为位置模式。
先上电可以通过我们提供上位机软件设置如下参数:
1. Modbus 使能 发送 1(只有 modbus 使能为 1 才能改其他参数,且外部脉冲信号无效。)
HEX 源码命令 : 01 06 00 00 00 01 48 0A
2. 电机加速度 发送 5000 (根据实际需要设置加速度,不设置即使用默认参数 20000)
HEX 源码命令 : 01 06 00 03 13 88 74 9C
3. 目标转速 发送 1500 (根据实际运行需要设置运行的速度,不设置即使用默认参数 2800)
HEX 源码命令 : 01 06 00 02 05 DC 2A C3
4. 电子齿轮分子 发送 0 (电子齿轮分子保存为 0 后,下次上电 mdobus 使能默认是 1)
HEX 源码命令 :01 06 00 0A 00 00 A9 C8
5. 参数保存标志 发送 1 (发此参数后,前面设置的参数保存到内部)
HEX 源码命令 :01 06 00 14 00 01 08 0E
6. 重新上电,看参数是否已经正确保存。以上设置只需要用提供的上位机设置即可,HEX 源码不需要自己通
过串口发送。
13参数设置完以后,就可以通过 PLC 或者单片机,或者自己设计的上位机软件发位置命令。发位置命令只需
要过 0x10 命令发送需要走的位置就行。
1. 发增量位置(增量位置的含义是,发送的数据即为电机需要向前或者向后走的位置)
例如需要向前走一圈(假设电机编码器为 1000 线编码器,一圈脉冲数即为 4000)
HEX 源码命令:01 10 00 0C 00 02 04 0F A0 00 00 F0 CC
例如需要向前后一圈(假设电机编码器为 1000 线编码器,一圈脉冲数即为-4000)-4000 的二进制计
算方法如下:4000 的二进制为 00 00 0F A0 。(注:0= FF FF FF FF +1)
-4000 即为 0 - 00 00 0F A0 =FF FF FF FF - 00 00 0F A0 +1=FF FF F0 5F +1 = FF FF F0 60
HEX 源码命令:01 10 00 0C 00 02 04 F0 60 FF FF C1 54
2. 发绝对位置(绝对位置的含义是,刚刚上电或者绝对位置清 0 或者自动找原点后的时候定义位置为 0,
绝对位置就是走到新发的位置,如第一次发 4000 为走一圈,第二次发已经走到了 4000 的位置,再发相同命令
电机不走)
例如需要电机走到 2 圈位置(假设电机编码器为 1000 线编码器,2 圈脉冲数即为 8000)
HEX 源码命令:01 10 00 16 00 02 04 1F 40 00 00 74 89
例如需要电机走回原点(当电子齿轮分子为 0 的时候,发送 0 为清除当前位置,所以走回原点发送 1,此
时一个脉冲并不会影响精度)
HEX 源码命令:01 10 00 16 00 02 04 00 01 00 00 23 49
注:控制电机只需要先发送需要的位置(尽量用绝对位置指令,因为可以重复发多次,依然是走到相同位
置),然后可以通过读取绝对位置对比是否走到设置位置,来判断是否执行下一条指令(注意判断的时候需要
允许+-2 的误差)。或者可以通过接 PF 信号,走到位后,驱动器会给出一个光耦输出的开关量信号。
读取绝对位置指令如下:01 03 00 16 00 02 25 CF
速度控制：
通过拨码开关 SW1 打 ON 再上电即为速度模式。
先上电可以通过我们提供上位机软件设置如下参数:
1. Modbus 使能 发送 1(只有 modbus 使能为 1 才能改其他参数,且外部脉冲信号无效。)
HEX 源码命令 : 01 06 00 00 00 01 48 0A
2. 电机加速度 发送 5000 (根据实际需要设置加速度,不设置即使用默认参数 20000)
HEX 源码命令 : 01 06 00 03 13 88 74 9C
3. 目标转速 发送 0(这个保存的转速,如果是 0,下次上电默认不转,如果是一个数,下次上电默认按保存
的转速转)
HEX 源码命令 : 01 06 00 02 05 DC 2A C3
4. 电子齿轮分子 发送 0 (电子齿轮分子保存为 0 后,下次上电 mdobus 使能默认是 1)
HEX 源码命令 :01 06 00 0A 00 00 A9 C8
5. 参数保存标志 发送 1 (发此参数后,前面设置的参数保存到内部)
HEX 源码命令 :01 06 00 14 00 01 08 0E
6. 重新上电,看参数是否已经正确保存。以上设置只需要用提供的上位机设置即可,HEX 源码不需要自己通
过串口发送。
参数设置完以后,就可以通过 PLC 或者单片机,或者自己设计的上位机软件发位置命令。发位置命令只需
要过 0x06 命令发送需要的转速就行。
例如需要电机转 1000RPM
HEX 源码如下:01 06
00 02 03 E8 28 B4